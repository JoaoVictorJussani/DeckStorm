<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Register
    </title>
  </head>
  <body>
    <div class="container">
      <h2>
        Register
      </h2>

      @if(flashMessages.has('error'))
        <div style="color: red; margin-bottom: 10px;">
          {{ flashMessages.get('error') }}
        </div>
      @endif
      
      <form action="/register" method="POST">
        {{ csrfField() }}
        <div class="form-group">
          <label for="username">Nom d'utilisateur:</label>
          <input type="text" id="username" name="username" required />
        </div>
        <div class="form-group">
          <label for="password">Mot de passe:</label>
          <input type="password" id="password" name="password" required />
        </div>
        <div class="form-group">
          <label for="confirm_password">Confirmation du mot de passe:</label>
          <input type="password" id="confirm_password" name="confirm_password" required />
        </div>
        <button type="submit" id="submit-button" style="display: none;">Register</button>
      </form>
      <p>
        Vous avez dÃ©ja un compte ?<a href="/login">se connecter</a>
      </p>
    </div>
  </body>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const usernameInput = document.querySelector("#username");
      const passwordInput = document.querySelector("#password");
      const confirmPasswordInput = document.querySelector("#confirm_password");
      const submitButton = document.querySelector("#submit-button");
      function validateForm() {
        const usernameValid = usernameInput.value.trim().length >= 3;
        const passwordValid = passwordInput.value.length >= 8;
        const passwordsMatch = passwordInput.value === confirmPasswordInput.value;
        if (usernameValid && passwordValid && passwordsMatch) {
          submitButton.style.display = "block"; // Affiche le bouton
          submitButton.textContent = "Inscription ready";
        } else {
          submitButton.style.display = "none"; // Cache le bouton
        }
      }
      [ usernameInput, passwordInput, confirmPasswordInput ].forEach(input => {
        input.addEventListener("input", validateForm);
      });
    });
  </script>
</html>
